/* =================================================================
   CONNECTED SCROLL-DRIVEN STYLE
   ================================================================= */

/* --- Animation Timelines --- */
@scroll-timeline hero-scroll {
  source: selector(#hero-section);
  orientation: block;
}

@scroll-timeline content-scroll {
  source: selector(#content-container);
  orientation: block;
}

.abstract-layout {
  background-color: var(--background);
  color: var(--foreground);
  font-family: var(--font-sans);
  position: relative;
  overflow-x: hidden;
}

/* -----------------
 * Hero Section
 * ----------------- */
.hero-section {
    position: sticky; /* Stick to the top while scrolling through it */
    top: 0;
    height: 100dvh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
}

.hero-svg-background {
    position: absolute;
    inset: 0;
    z-index: 0;
}

.hero-svg-background svg {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.svg-path {
    stroke-width: 1px;
    fill: none;
}

.hero-content { position: relative; z-index: 1; }
.hero-content h1 { font-size: 4.5rem; font-weight: 800; margin: 0; }
.hero-content .label { font-size: 1.5rem; color: var(--primary); }

/* -----------------
 * Main Content Layout
 * ----------------- */
.content-container {
    position: relative; 
    z-index: 1; 
    background-color: var(--background);
}

.content-wrapper {
    max-width: 900px; 
    margin: 0 auto; 
    padding: 3rem 2rem; 
    display: grid; 
    gap: 8rem; /* Increased gap */
}

/* -----------------
 * Title Cartouche
 * ----------------- */
.section-title-wrapper {
    position: relative;
    z-index: 2; /* Above the timeline line */
    text-align: center;
    margin-bottom: 3rem;
}

.section-title {
    font-size: 2rem;
    font-weight: 700;
    color: var(--foreground);
    background: var(--background);
    padding: 0.5rem 1.5rem;
    display: inline-block;
    position: relative;
}

/* Rounded caps for the cartouche */
.section-title::before, .section-title::after {
    content: '';
    position: absolute;
    top: 50%;
    width: 1rem;
    height: 100%;
    background-color: var(--background);
    transform: translateY(-50%);
}
.section-title::before { left: -0.5rem; border-radius: 1rem 0 0 1rem; }
.section-title::after { right: -0.5rem; border-radius: 0 1rem 1rem 0; }


/* -----------------
 * The single, continuous timeline line
 * ----------------- */
.timeline-line {
    position: absolute;
    left: 50%;
    top: 0;
    bottom: 0;
    width: 2px;
    transform: translateX(-50%);
    background: linear-gradient(180deg, #ff00c3, #a600ff, #007bff, #00e5ff, #00ff87, #ff00c3);
    background-size: 100% 300%;
    transform-origin: top;
    /* Animation */
    animation: draw-line linear forwards, flow-gradient 10s linear infinite;
    animation-timeline: content-scroll;
}

@keyframes draw-line {
    from { transform: translateX(-50%) scaleY(0); }
    to { transform: translateX(-50%) scaleY(1); }
}

@keyframes flow-gradient {
    from { background-position: 0% 0%; }
    to { background-position: 0% 300%; }
}

/* -----------------
 * Timeline Items
 * ----------------- */
.timeline-section { display: flex; flex-direction: column; align-items: center; }

@keyframes fade-in-item {
  from { opacity: 0; transform: scale(0.9); }
  to { opacity: 1; transform: scale(1); }
}

.timeline-item {
    position: relative;
    margin-bottom: 3rem;
    width: 50%;
    padding: 0 2rem;
    animation: fade-in-item linear forwards;
    animation-timeline: view();
    animation-range: entry 25% cover 40%;
}

.timeline-item::after { content: ''; position: absolute; top: 0.5rem; width: 1rem; height: 1rem; border-radius: 50%; background-color: var(--secondary); border: 3px solid var(--background); z-index: 1; }

.timeline-item:nth-child(even) { align-self: flex-end; } 
.timeline-item:nth-child(even)::after { left: 0; transform: translateX(-50%); }
.timeline-item:nth-child(odd) { align-self: flex-start; text-align: right; }
.timeline-item:nth-child(odd)::after { right: 0; transform: translateX(50%); }
.timeline-item:nth-child(odd) .item-header { flex-direction: row-reverse; }

.timeline-item .item-header { display: flex; justify-content: space-between; align-items: baseline; }
.timeline-item .item-title { font-weight: 600; font-size: 1.1rem; }
.timeline-item .item-subtitle { font-size: 0.9em; color: var(--muted-foreground); }
.timeline-item .item-date { font-size: 0.9em; color: var(--muted-foreground); }
.timeline-item .summary { margin-top: 0.5rem; color: var(--muted-foreground); }

/* -----------------
 * Other Sections
 * ----------------- */
.cards-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem; }
.card { background-color: oklch(from var(--card) l a b / 0.5); border: 1px solid var(--border); border-radius: var(--radius-lg); padding: 1.5rem; backdrop-filter: blur(10px); }
.card .card-title { font-size: 1.2rem; font-weight: 600; color: var(--primary); margin-bottom: 1rem; }
.skills-list { display: flex; flex-wrap: wrap; gap: 0.5rem; }
.skills-list .skill-tag { background-color: var(--muted); padding: 0.25rem 0.75rem; border-radius: var(--radius-md); }

/* -----------------
 * Responsiveness & Print
 * ----------------- */
@media (max-width: 768px) {
    .hero-content h1 { font-size: 3rem; }
    .timeline-line, .timeline-section::before { left: 0.5rem; }
    .timeline-item, .timeline-item:nth-child(odd) { width: 100%; align-self: flex-start; text-align: left; padding-left: 2rem; }
    .timeline-item:nth-child(odd) .item-header { flex-direction: row; }
    .timeline-item::after, .timeline-item:nth-child(odd)::after, .timeline-item:nth-child(even)::after { left: 0.5rem; right: auto; }
}

@media print {
    .abstract-layout, .card { background: #fff !important; color: #000 !important; }
    .hero-section, .timeline-line { display: none; }
    .card { backdrop-filter: none; }
    .timeline-item, .timeline-item:nth-child(odd) { width: 100%; padding-left: 1rem; }
    .timeline-item::before, .timeline-section::before { display: none; }
}